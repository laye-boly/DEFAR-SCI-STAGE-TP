<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Les bases de VueJS</title>
    <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
</head>
<body>
    <div id="app">
        <div v-bind:class="affichage">
            <div class="jumbotron">
                login: <input type="text" v-model="user">
                <p>vous etes connecte en tant que {{user}}</p>
                <div v-if="commandes.length">
                    <h2>Produits commandes</h2>
                    <ul>
                        <li v-for="commande in commandes">{{commande}}</li>
                    </ul>
                </div>
                <div>
                    <h2>Vos produits</h2>
                    <ul>
                        <!-- <li v-for="produit in produits"> {{produit}} <button v-on:click="commander(produit)">Commander</button></li> -->
                        <fiche-produit  v-for="produit in produits" v-bind:nom="produit" v-on:commande-passe="commander"></fiche-produit>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <script>
        Vue.component('fiche-produit', {
            template: '<li> {{nom}} <button v-on:click="passer_commande(nom)">Commander</button></li>',
            props: ['nom'],
            methods:{
                passer_commande: function(produit){
                    this.$emit('commande-passe', produit)
                }
            }
        })
        var app = new Vue({
            el: "#app",
            data: {
                user: "Bertrand",
                produits: ["pizza", "hamburger", "cheeze", "tacos"],
                commandes: [],
                affichage: "container"
            },
            methods: {
                commander: function(produit){
                    console.log(produit)
                    this.commandes.push(produit)
                }
            }
        })
    </script>
</body>
</html>